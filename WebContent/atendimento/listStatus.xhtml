<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:composition template="/WEB-INF/template/atendimento_liststatus_template.xhtml">
		<ui:define name="titulo">#{prompt.atendimento}</ui:define>
		<ui:define name="descricao">#{prompt.atendimento_descList}</ui:define>
		<ui:define name="descricao_ajuda">
			#{help.tecmodel_Cadastro}
			<br /><br />
			<span class="negrito">#{prompt.excluir} -</span> #{help.tecmodel_Excluir}
			<br /><br />
			<span class="negrito">#{prompt.imprimir} -</span> #{help.tecmodel_Imprimir}
			<br /><br />
			<span class="negrito">#{help.observacao_AlertaPadrao} </span> #{help.observacao_AcessoOutrosHelp}
		</ui:define>
		<ui:define name="corpo">
			<a4j:keepAlive beanName="atendimentoActions" />
			<h:form>
	
			<h:panelGrid columns="5">
				<h:outputText value="#{prompt.areaDeBusca}" /> 
				<h:inputText value="#{atendimentoActions.campoDeBusca}"/>
					<h:selectOneMenu id="comboBusca" value="#{atendimentoActions.comboTiposDeBusca.selecao}">
						<f:selectItems value="#{atendimentoActions.comboTiposDeBusca.listaSelecao}" />
					</h:selectOneMenu>
				<h:commandButton value="#{prompt.buscar}" action="#{atendimentoActions.buscaAtendimento}" />
				<a4j:commandButton value="#{prompt.voltarListagemCompleta}" 
							action="#{atendimentoActions.voltarListaCompleta}" rendered="#{atendimentoActions.buscaEfetuada}"/>
			</h:panelGrid>	
			<br />
			<rich:datascroller id="scrTabelaAtendimentos" for="tabelaAtendimentos" maxPages="5"
				align="center" renderIfSinglePage="false"
				page="#{atendimentoActions.paginaAtendimento}" pageIndexVar="paginaAtual">
			</rich:datascroller>
			<rich:dataTable id="tabelaAtendimentos" var="atendimento"	align="center" 
				value="#{atendimentoActions.listaDeAtendimentos}" rows="10" width="700px" reRender="#{atendimentoActions.buscaEfetuada}">

				<f:facet name="header">
				
					<rich:columnGroup>
					
						<rich:column>
							<h:outputText title="#{tooltip.atendimento_codigo}"  value="#{prompt.atendimento_codigo}" />
						</rich:column>

						<rich:column>
							<h:outputText title="#{tooltip.atendimento_data}" value="#{prompt.atendimento_dataAtendimento}" />
						</rich:column>
						
						<rich:column>
							<h:outputText title="#{tooltip.atendimento_medico}" value="#{prompt.atendimento_medico}" />
						</rich:column>
						
						<rich:column>
							<h:outputText title="#{tooltip.atendimento_prognostico}" value="#{prompt.atendimento_prognostico}" />
						</rich:column>
						
						<rich:column>
							<h:outputText title="#{tooltip.atendimento_tecnico}" value="#{prompt.atendimento_tecnico}" />
						</rich:column>
						
						<rich:column>
							<h:outputText title="#{tooltip.atendimento_status}" value="#{prompt.atendimento_status}" />
						</rich:column>
						
					</rich:columnGroup>
					
				</f:facet>
				
				
				<rich:column styleClass="colunaCampoNumericoCentralizado">
					<h:commandLink value="#{atendimento.codAtendimento}" action="#{atendimentoActions.mostra}" />
				</rich:column>
				
				<rich:column>
					<rich:calendar id="dataAtendimento" datePattern="dd/MM/yyyy HH:mm" value="#{atendimento.dataAtendimento}" disabled="true" />
				</rich:column>
				
				<rich:column>
					<h:outputText value="#{atendimento.medico}" />
				</rich:column>
				
				<rich:column>
					<h:outputText value="#{atendimento.prognostico}" />
				</rich:column>
				
				<rich:column>
					<h:outputText value="#{atendimento.tecnico.nome}" />
				</rich:column>
				
				<rich:column>
					<h:outputText value="#{atendimento.status}" />
				</rich:column>

				<f:facet name="footer">
					
					<h:panelGrid columns="2">
					
						<h:outputText value="#{prompt.numeroDeAtendimentos} = #{atendimentoActions.listaDeAtendimentos.rowCount}"/>
						
					</h:panelGrid>
					
				</f:facet>

			</rich:dataTable>

			<br />
			<b><h:outputText value="#{prompt.msgDetalharAtendimento}" style="font:13px" /></b>

		</h:form>

		<h:form id="formExclusao">
			<rich:modalPanel id="panelConfirmacaoExclusao" height="120"
				width="500">

				<f:facet name="header">
					<h:panelGroup>
						<h:outputText value="#{prompt.atencao}"></h:outputText>
					</h:panelGroup>
				</f:facet>

				<f:facet name="controls">
					<h:graphicImage class="close"
						onclick="Richfaces.hideModalPanel('panelConfirmacaoExclusao')" />
				</f:facet>

				<h:outputText value="#{prompt.confirmacaoExclusaoPaciente}"/>

				<center><br />
				<br />

				<h:panelGrid columns="2">

					<h:commandButton id="ok" value="#{prompt.sim}"
						action="#{atendimentoActions.exclui}" styleClass="botao">
						<rich:componentControl for="panelConfirmacaoExclusao"
							operation="hide" event="onclick" />
					</h:commandButton>

					<h:commandButton id="cancelar" value="#{prompt.nao}"
						action="Richfaces.hideModalPanel('panelConfirmacaoExclusao')">
						<rich:componentControl for="panelConfirmacaoExclusao"
							operation="hide" event="onclick" />
					</h:commandButton>

				</h:panelGrid>
				
				</center>

			</rich:modalPanel>
			
			</h:form>
		</ui:define>
	</ui:composition>

</html>