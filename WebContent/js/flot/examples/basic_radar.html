<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples</title>
    <link href="layout.css" rel="stylesheet" type="text/css"></link>
    <!--[if IE]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="../jquery.js"></script>
    <script language="javascript" type="text/javascript" src="../jquery.flot.js"></script>
    <script language="javascript" text="text/javascript" src="../../JUMFlot/jquery.flot.JUMlib.js"></script>
    <script language="javascript" text="text/javascript" src="../../JUMFlot/jquery.flot.mouse.js"></script>
    <script language="javascript" text="text/javascript" src="../../JUMFlot/jquery.flot.spider.js"></script>

 </head>
    <body>
    <h1>Flot Examples</h1>

    <div id="conjunto_infos_grafico">
      <p id="choices">Show:</p>

      <div id='tooltip' style="float:left; border: 1px solid #fdd;  padding: 2px;  background-color: #fee;  opacity: 0.80;">
        <p>Detalhes:</p>
        <span id="plot_hover_y"></span>: <span id="plot_hover_x"></span>
      </div>
      <div id="placeholder" style="width:1000px;height:600px;border: 1px dashed gainsboro;"></div>

    </div>

<script id="source" language="javascript" type="text/javascript">
$(function () {

var plot;

var datasets = [{"spider":{"show":true,"fill":true},"label":"Necessidade do Paciente","data":[[0.0,0.7],[1.0,0.8],[2.0,0.7],[3.0,0.0],[4.0,0.0],[5.0,1.0],[6.0,1.0],[7.0,1.0]]},{"spider":{"show":true,"fill":false},"label":"Levofloxacina 500 mg","data":[[0.0,1.0],[1.0,0.7000000000000001],[2.0,1.0],[3.0,0.10000000000000002],[4.0,0.7999999999999999],[5.0,1.0],[6.0,0.6],[7.0,1.0]]},{"spider":{"show":true,"fill":false},"label":"Flucozanol 200 mg","data":[[0.0,0.9],[1.0,0.6],[2.0,0.9],[3.0,0.10000000000000002],[4.0,0.7000000000000001],[5.0,0.7999999999999999],[6.0,0.5],[7.0,1.0]]},{"spider":{"show":true,"fill":false},"label":"Bactrim 500 mg","data":[[0.0,0.7000000000000001],[1.0,0.9],[2.0,0.7000000000000001],[3.0,0.7999999999999999],[4.0,0.7000000000000001],[5.0,0.10000000000000002],[6.0,0.7999999999999999],[7.0,1.0]]},{"spider":{"show":true,"fill":false},"label":"Amoxilina 500 mg","data":[[0.0,0.7999999999999999],[1.0,1.0],[2.0,0.7999999999999999],[3.0,1.0],[4.0,0.7999999999999999],[5.0,0.20000000000000004],[6.0,0.9],[7.0,0.0]]},{"spider":{"show":true,"fill":false},"label":"Amoxilina 1000 mg","data":[[0.0,0.6],[1.0,0.4000000000000001],[2.0,0.6],[3.0,0.7000000000000001],[4.0,0.6],[5.0,0.10000000000000002],[6.0,0.7000000000000001],[7.0,0.0]]},];
// {
//     "necpac": {
//         label: "Necessidade do Paciente",
//         data: [ [0,10], [1,20], [2,80], [3,70], [4,60], [5, 40], [6, 90], [7, 10]],
//         spider: {show: true, fill: true}
//     },     
//     "bactrim": {
//         label: "Bactrim",
//         data: [ [0,30], [1,20], [2,80], [3,70], [4,60], [5, 60], [6, 40], [7, 10] ],
//         spider: {show: true}
//     },        
//     "amox1": {
//         label: "Amoxilina 1",
//         data: [ [0,20], [1,50], [2,80], [3,50], [4,70], [5, 40], [6, 90], [7, 20] ],
//         spider: {show: true}
//     },        
// };

// var d1 = [ [0,10], [1,20], [2,80], [3,70], [4,60], [5, 40], [6, 90], [7, 10], [8, 60] ];
// var d2= [ [0,30], [1,20], [2,80], [3,70], [4,60], [5, 60], [6, 40], [7, 10], [8, 60] ];
// var d3 = [ [0,20], [1,50], [2,80], [3,50], [4,70], [5, 40], [6, 90], [7, 20], [8, 90] ];

console.log(datasets);
// console.log(d1);
// console.log(d2);
// console.log(d3);


// var data = [
//     { label: "Pies", color:"green",data: d1,
//          spider: {show: true, fill: true} },
//     { label: "Apples",color:"orange",data: d2,
//      spider: {show: true, fill: true} },
//     { label: "Cherries",color:"red",data: d3,
//      spider: {show: true}}   
// ];


var options = {"series":{"spider":{"pointSize":5.0,"connection":{"width":5.0},"active":true,"highlight":{"mode":"area"},"legs":{"data":[{"label":"Febre"},{"label":"Dis?ria"},{"label":"Diabetes"},{"label":"Etiologia Enterococos"},{"label":"Etiologia Escherichia"},{"label":"Etiologia C?ndida"},{"label":"N?o causar Efeitos Colaterais"},{"label":"Alergia Gen?rica"}]},"scaleMode":"static","legMin":0.0,"legMax":1.0,"spiderSize":0.5,"show":true,"fill":true}},"grid":{"mode":"radar","clickable":true,"hoverable":true}};


// { 
//   series:{ 
//     spider:{
//       pointSize: 5,
//       connection: {width:5},
//       active: true, 
//       highlight: {
//         mode: "area"
//       },
//       legs: { 
//           data: [
//             {label: "Efeitos Colaterais"},
//             {label: "Febre"},
//             {label: "Disuria"},
//             {label: "Diabetes"},
//             {label: "P005"},
//             {label: "P006"},
//             {label: "P007"},
//             {label: "P008"}
//             ],
//           // legScaleMax: 1,legScaleMin:0.8
//       },
//       scaleMode: "static" ,
//       legMin: 0,
//       legMax: 100,
//       spiderSize: 0.5   

//     }
//   },
//     grid:{ 
//         hoverable: true, 
//         clickable: true,
//         tickColor: "rgba(0,0,0,0.2)",
//         mode: "radar"
//     }
// };

// hard-code color indices to prevent them from shifting as
var i = 0;
$.each(datasets, function(key, val) {
    val.color = i;
    ++i;
});
// insert checkboxes 
var choiceContainer = $("#choices");
$.each(datasets, function(key, val) {
  //adciona todas menos a da necessidade do paciente
  if(key != 0){
    choiceContainer.append('<br/><input type="checkbox" name="' + key +
                           '" id="' + key + '">' +
                           '<label for="' + key + '">'
                            + val.label + '</label>');
  }
});

choiceContainer.find("input").click(plotAccordingToChoices);


function plotAccordingToChoices() {
    var data = [];
    //add necessidade do paciente sempre
    data.push(datasets[0]);

    choiceContainer.find("input:checked").each(function () {
        var key = $(this).attr("name");
        if (key && datasets[key])
            data.push(datasets[key]);
    });
    console.log(data);
    if (data.length > 0)
      plot = $.plot($("#placeholder"), data, options);
}

plotAccordingToChoices();



// $("<div id='tooltip'></div>").css({
//   position: "absolute",
//   border: "1px solid #fdd",
//   padding: "2px",
//   "background-color": "#fee",
//   opacity: 0.80
// }).appendTo("body");


$("#placeholder").bind("plothover", function (event, pos, item) {

    // $("#plot_hover_x").text(pos.x.toFixed(2));
    // $("#plot_hover_x").text(pos.y.toFixed(2));
    if (item) {
      var x = item.datapoint[0].toFixed(2),
        y = item.datapoint[1].toFixed(2);
      var label_x = plot.getOptions().series.spider.legs.data[parseInt(x)].label;


      $("#plot_hover_x").text(y);
      $("#plot_hover_y").text(label_x);
      // $("#tooltip").html(item.series.label + " of " + label_x + " = " + y)
      // $("#tooltip").offset({left:0,top:0})
        // .fadeIn(200);
    // } else {
    //   $("#tooltip").hide();
    }
});


});
</script>

 </body>
</html>
